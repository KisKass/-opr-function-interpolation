<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">

    <link rel="stylesheet" type="text/css"
          href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/css/bootstrap.min.css">
    <script type="text/javascript" src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
    <script type="text/javascript"
            src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" type="text/css"
          href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href=”http://cdn.pydata.org/bokeh/release/bokeh-2.4.3.min.css" rel=”stylesheet” type=”text/css”>
    <link href=”http://cdn.pydata.org/bokeh/release/bokeh-widgets-2.4.3.min.css"
          rel=”stylesheet” type=”text/css”>
    <style>
        body {
            background: #0083B0;
            background: -webkit-linear-gradient(to right, #0083B0, #00B4DB);
            background: linear-gradient(to right, #0083B0, #00B4DB);
            min-height: 100vh;
        }

        .form-control::placeholder {
            font-style: italic;
            font-size: 0.85rem;
            color: #aaa;
        }

        .table-responsive {
            max-height: 300px;
        }
    </style>

</head>
<body>

<div class="container-fluid ">
    <div class="row">
        {% if not empty%}
        <div class="col-lg-8 ">
            <div class="card rounded-0 border-0 shadow">
                <div class="card-body p-5">
                    <div style="width: 100%">

                        {{div | safe}}


                    </div>

                </div>
            </div>
        </div>
        {%endif%}
        {%if not empty%}
        <div class="col-lg-3 ">
            {% else %} <div class="col-lg-6 " style="margin-left: auto;
    margin-right: auto;">{% endif%}
            <div class="card rounded-0 border-0 shadow">
                <div class="card-body p-5">

                    <!--  Bootstrap table-->
                    <form action="" method="post">
                        {%csrf_token%}
                        <div class="table-responsive">

                            <table class="table" name="input_val">
                                <thead>
                                <tr>
                                    <th scope="col">#</th>
                                    <th scope="col">X</th>
                                    <th scope="col">Y</th>

                                    <th scope="col"></th>
                                </tr>
                                </thead>
                                <tbody>

                                </tbody>
                            </table>
                        </div>

                        <!-- Add rows button-->
                        <a class="btn btn-primary rounded-0 btn-block" id="insertRow" href="#">Добавить точку</a>
                        <button class="btn btn-primary rounded-0 btn-block" name="default" id="submit" type="submit">Расчитать</button>
                        <button class="btn btn-primary rounded-0 btn-block" name="random"  type="submit">Сгенерировать случайно</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
     {% if not  empty%}
    <div class="row" style="margin-top: 15px">
        <div class="col-lg-8 ">
            <div class="card rounded-0 border-0 shadow">
                <div class="card-body p-5">
                    <table class="table table-hover table-bordered table-sm table-responsive">
                        <thead>
                        <tr>
                            <th scope="col">#</th>
                            <th scope="col">x</th>
                            <th scope="col">y (Кубический сплайн)</th>
                            <th scope="col">y (Полиномиальная интерполяция)</th>

                        </tr>
                        </thead>
                        <tbody>
                        {% for x,y_cs,y_l in xy%}

                        <tr>
                            <th scope="row">{{ forloop.counter }}</th>
                            <td>{{x}}</td>
                            <td>{{y_cs}}</td>
                            <td>{{y_l}}</td>

                        </tr>
                        {%endfor%}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
    {%endif%}
</div>


</body>
<script>
    $(function () {

        // Start counting from the third row
        var counter = 1;

        $("#insertRow").on("click", function (event) {
            event.preventDefault();

            var newRow = $("<tr>");
            var cols = '';

            // Table columns
            cols += '<th scrope="row">' + counter + '</th>';
            cols += '<td><input class="form-control rounded-0" type="text" name="x" placeholder=""></td>';
            cols += '<td><input class="form-control rounded-0" type="text" name="y" placeholder=""></td>';

            cols += '<td><button class="btn btn-danger rounded-0" id ="deleteRow"><i class="fa fa-trash"></i></button</td>';

            // Insert the columns inside a row
            newRow.append(cols);

            // Insert the row inside a table
            $('table[name="input_val"]').append(newRow);

            // Increase counter after each row insertion
            counter++;
        });

        // Remove row when delete btn is clicked
        $('table[name="input_val"]').on("click", "#deleteRow", function (event) {
            $(this).closest("tr").remove();
            counter -= 1
        });
    });
</script>

<script src="https://cdn.bokeh.org/bokeh/release/bokeh-2.4.3.min.js"></script>
<script src="https://cdn.bokeh.org/bokeh/release/bokeh-widgets-2.4.3.min.js"></script>
<script src="https://cdn.bokeh.org/bokeh/release/bokeh-tables-2.4.3.min.js"></script>
<script src="https://cdn.bokeh.org/bokeh/release/bokeh-api-2.4.3.min.js"></script>
{{script| safe}}
</html>